<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="fr" class="sr">
	<head>
		<title>PHP - Les bases du développement</title>
		<meta charset="UTF-8" />
		<meta name="generator" content="SCENARI 6.1.9 / ressRef 4.0.2" />
		<meta name="revision" content="2023-06-27 07:07" />
		<link rel="stylesheet" type="text/css" href="./scCodeMgr.css" />
		<link rel="stylesheet" type="text/css" href="./tpl.css" />
		<link rel="stylesheet" type="text/css" href="./tePlayer(1).css" />
		<script><![CDATA[
/*0*/ var scServices = window.opener ? window.opener.scServices : window.parent.scServices;
]]></script>
		<script src="./scCoLib(1).js.téléchargement" />
		<script src="./teMgr(1).js.téléchargement" />
		<script src="./teSubControllers(1).js.téléchargement" />
		<script src="./scTiLib(1).js.téléchargement" />
		<script src="./scSiLib(1).js.téléchargement" />
		<script src="./scPaLib(3).js.téléchargement" />
		<script src="./scDynUiMgr(1).js.téléchargement" />
		<script src="./scMapMgr.js.téléchargement" />
		<script src="./scTooltipMgr(1).js.téléchargement" />
		<script src="./scAssmntMgr.js.téléchargement" />
		<script src="./TESettingsFromTracks.js.téléchargement" />
		<script src="./mediaelement.min(1).js.téléchargement" />
		<script src="./scrollreveal.js.téléchargement" />
		<script src="./tplMgr(1).js.téléchargement" />
		<script src="./keyMap.js.téléchargement" />
		<script src="./frameMgr(1).js.téléchargement" />
		<script src="./tePlayer(1).js.téléchargement" />
		<script src="./scCodeMgr.js.téléchargement" />
		<script src="./scImageMgr(1).js.téléchargement" />
		<script src="./fullscreen-api-polyfill.min.js.téléchargement" />
		<script src="./vtt.min.js.téléchargement" />
		<script src="./mapMgr.js.téléchargement" />
		<script><![CDATA[
mejs.Utils.ajax = (url, dataType, success, error) => {
    fetch(url, { credentials: "include", cache: "no-cache" }).then((resp) => resp.text().then(success)).catch(error)
}
scCodeMgr.registerCode("des:div.code");

scImageMgr.registerAdaptedImage("ide:content/des:img.adapted");

scImageMgr.registerGallery("des:div.galFra");

scImageMgr.registerSequence("des:div.seqFra");

scImageMgr.registerZoom("des:a.zoom",{toolbar:1,mag:1,titlePath:"par:/nsi:/des:span.title"});

tePlayerMgr.init();
if(scServices.locationStorage) scServices.locationStorage.setLocation("co/exercise.xhtml");
]]></script>
		<link rel="shortcut icon" type="image/png" href="https://afpa-ress.scenari.eu/lib-ressRef@4.0/site-default-skin/img/favicon.png" />
		<meta content="width=device-width, initial-scale=1.0, maximum-scale=1" name="viewport" />
		<style type="text/css" media="screen"><![CDATA[body{
	visibility:hidden;
}]]></style>
		<link type="text/css" rel="stylesheet" href="./main(1).css" />
		<link type="text/css" rel="stylesheet" href="./skin(2).css" /></head>
	<body class="exercise sliderLoading page_scrolled" style="height: 100%;">
		<div id="root"><header id="header"><strong class="hidden">Menu accessibilité :</strong><ul id="accessibility"><li class="tplWaiContent"><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#content" title="aller au contenu"><span>contenu</span></a></li><li class="tplWaiNav"><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#toolbox" title="aller à la barre de navigation"><span>navigation</span></a></li></ul><hr class="hidden" /><div class="inline"><a class="rootLnk" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml" title="Accueil"><span>Accueil</span></a><h1 class="rootTitle"><span class="title">PHP - Les bases du développement</span></h1><a id="tplBtnNav" class="tplBtnNav" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" onclick="tplMgr.toggleNav(); return false;" title="Menu"><span>Menu</span></a><nav id="toc"><a class="btnHome" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml"><span>Accueil</span></a><div class="tocContent" /></nav></div></header><main id="main"><div id="content"><section class="intro " data-sr-id="0" style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s, transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s;"><div class="block information"><div class="block_ti"><span>OBJET DES EXERCICES</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Il s'agit ici d'une série d'exercices guidés visant à comprendre les techniques de développement de pages Web dynamiques à l'aide du langage PHP.</p></div><div class="blockTxt "><p class="txt_p ">- Exercice 1 : <q class="txt_quote_ph "><span class="txt_quote_php ">« </span>Hello Word<span class="txt_quote_phs "> »</span></q> acquisition des premiers éléments du langage PHP.</p></div><div class="blockTxt "><p class="txt_p ">- Exercice 2 : Connaître les variables d'environnement et les tableaux associatifs.</p></div><div class="blockTxt "><p class="txt_p ">- Exercice 3 : Travailler avec les variables de Session et comprendre leur rôle.</p></div><div class="blockTxt "><p class="txt_p ">- Exercice 4 : Exploitation des formulaires.</p></div></div></div></section><section class="section exercQuestion" data-sr-id="2" style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s, transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s;"><h2 class="section_ti"><span>Question 1</span></h2><div class="section_co "><div class="blockTxt "><p class="txt_p ">HELLO WORLD !</p></div><div class="blockTxt "><p class="txt_p ">Ce premier exercice est une variante du programme d'affichage du message «Hello World!» utilisé fréquemment pour présenter les techniques de programmation de chaque langage.</p></div><div class="blockTxt "><p class="txt_p ">Le résultat voulu ressemble à ceci:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><img src="./renduphpexo1.png" class="adapted " width="630" height="524" alt="" style="max-width: 100%; height: auto;" /></div></figure></div></div><div class="block hint"><a role="button" style="display:block;" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" class="block_open" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onclick="scDynUiMgr.collBlkToggle(this, scPaLib.findNode(&apos;par:/chl:div.block_co&apos;,this),&apos;block_open&apos;,&apos;block_closed&apos;);return false;" aria-expanded="true"><span class="block_ti "><span class="block_tiIn ">Indice</span></span></a><div class="block_co  collBlk_open" style=""><div class="blockTxt "><p class="txt_p ">Le code HTML</p></div><div class="blockTxt "><p class="txt_p ">Le code HTML correspondant à la première partie pourrait être :</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><img src="./codehtmlvue.png" class="adapted " width="630" height="318" alt="" style="max-width: 100%; height: auto;" /></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Bien sûr, un développeur pourrait écrire ce code HTML tel quel grâce à quelques copier/coller mais nous allons ici faire générer une partie de ce code HTML par PHP, puisque c'est la raison d'être du langage PHP!</p></div></div></div><div class="block hint"><a role="button" style="display:block;" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" class="block_open" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onclick="scDynUiMgr.collBlkToggle(this, scPaLib.findNode(&apos;par:/chl:div.block_co&apos;,this),&apos;block_open&apos;,&apos;block_closed&apos;);return false;" aria-expanded="true"><span class="block_ti "><span class="block_tiIn ">Indice</span></span></a><div class="block_co  collBlk_open" style=""><div class="blockTxt "><p class="txt_p ">La boucle for :</p></div><div class="blockTxt "><p class="txt_p ">On remarque que, dans la partie répétitive, seule la valeur de l'attribut <q class="txt_quote_ph "><span class="txt_quote_php ">« </span>size<span class="txt_quote_phs "> »</span></q> varie de ligne en ligne; il serait donc judicieux de faire varier automatiquement une variable depuis la valeur 3 jusqu'à la valeur 7 et d'injecter cette valeur dans un «flot HTML» construit «à la volée».</p></div><div class="blockTxt "><p class="txt_p ">Le langage de programmation PHP dispose de tout l'attirail nécessaire: déclaration et utilisation de variables, instructions de tests, instructions répétitives comme la boucle for adaptée à notre cas.</p></div><div class="blockTxt "><p class="txt_p "><span class="txt_url_ph "><a class="txt_url_ul" target="_blank" href="https://www.php.net/manual/fr/control-structures.for.php" rel="noopener" title="https://www.php.net/manual/fr/control-structures.for.php (nouvelle fenêtre)"><span>https://www.php.net/manual/fr/control-structures.for.php</span></a></span></p></div></div></div><div class="block solution"><a role="button" style="display:block;" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" class="block_open" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onclick="scDynUiMgr.collBlkToggle(this, scPaLib.findNode(&apos;par:/chl:div.block_co&apos;,this),&apos;block_open&apos;,&apos;block_closed&apos;);return false;" aria-expanded="true"><span class="block_ti "><span class="block_tiIn ">Corrigé</span></span></a><div class="block_co  collBlk_open" style=""><div class="block information"><div class="block_co"><div class="blockTxt "><p class="txt_p ">Rappel des principes PHP:</p></div><div class="blockTxt "><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Dans le code PHP, toute portion de code <strong class="txt_emphasis_is "><em class="txt_special_ph ">HTML/CSS/JavaScript</em></strong> écrit en dehors des balises PHP spécifiques sera envoyée sans modification au navigateur demandeur.</p></li><li class="txt_ili "><p class="txt_p ">Toute portion de code PHP écrite dans une balise spécifique <strong class="txt_emphasis_is ">&lt;?php ...?&gt;</strong> sera interprétée et son résultat inclus dans le flot HTML en lieu et place de la balise PHP.</p></li><li class="txt_ili "><p class="txt_p ">Les scripts PHP doivent être enregistrés avec une extension particulière (.php par défaut) pour être interprétés par le serveur<strong class="txt_emphasis_is "><em class="txt_special_ph "> Web Apache/PHP</em></strong> avant leur envoi au navigateur.</p></li></ul></div><div class="blockTxt "><p class="txt_p ">Nous pouvons donc obtenir le code HTML ci-dessus grâce au script PHP suivant:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/exo1corrige.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./exo1corrige_1.png" class="adapted " width="630" height="267" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Reproduire et tester en jouant cette page, servie en HTTP par votre serveur Web Apache/PHP.</p></div></div></div><div class="block remark"><div class="block_ti"><span>Variantes:</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Pour mieux comprendre la syntaxe PHP, saisir ces variantes et tester le résultat:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/exo1vue2.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./exo1vue2_1.png" class="adapted " width="630" height="175" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Pour terminer, ajouter le code PHP nécessaire pour réaliser le même type d'affichage en faisant varier cette fois-ci les balises HTML de &lt;h5&gt; à &lt;h1&gt;:</p></div></div></div><div class="block advice"><div class="block_ti"><span>Testez sur différents navigateurs Web.</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Le contrôle visuel de ce qui est affiché par le navigateur ne suffit pas pour bien tester du code PHP!</p></div><div class="blockTxt "><p class="txt_p ">Il est nécessaire de vérifier que le code HTML reçu est correct en relisant systématiquement le code source de la page Web reçue par le navigateur grâce au débogueur intégré.</p></div></div></div></div></div></div></section><section class="section exercQuestion" data-sr-id="3" style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s, transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s;"><h2 class="section_ti"><span>Question 2</span></h2><div class="section_co "><div class="blockTxt "><p class="txt_p ">VARIABLES D'ENVIRONNEMENT</p></div><div class="blockTxt "><p class="txt_p ">On sait déjà que le navigateur Web dispose d'informations multiples sur l'ordinateur qui joue la page Web (voir l'objet JavaScript prédéfini Navigator).</p></div><div class="blockTxt "><p class="txt_p ">Ces informations (et beaucoup d'autres!) sont véhiculées (à l'insu de votre plein gré) par le protocole <strong class="txt_emphasis_is "><em class="txt_special_ph ">HTTP</em></strong> depuis le client Web jusqu'au serveur Web.</p></div><div class="blockTxt "><p class="txt_p ">Ainsi, un script <strong class="txt_emphasis_is ">PHP</strong> peut savoir quel type de navigateur a exprimé la demande de page de manière à générer du code <strong class="txt_emphasis_is ">HTML</strong> optimisé pour ce navigateur.</p></div><div class="blockTxt "><p class="txt_p ">De plus, d'autres informations concernant l'environnement serveur Web sont disponibles à travers des instructions <strong class="txt_emphasis_is ">PHP</strong>, ce qui permet éventuellement au script PHP de s'adapter au type de serveur Web qui est réellement utilisé (retenez que le serveur Web de développement n'est pas le serveur Web de publication et qu'un environnement PHP ne vaut pas l'autre !).</p></div><div class="blockTxt "><p class="txt_p ">Reproduisez la page suivante :</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><img src="./renduexo2.png" class="adapted " width="630" height="604" alt="" style="max-width: 100%; height: auto;" /></div></figure></div></div><div class="block hint"><a role="button" style="display:block;" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" class="block_open" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onclick="scDynUiMgr.collBlkToggle(this, scPaLib.findNode(&apos;par:/chl:div.block_co&apos;,this),&apos;block_open&apos;,&apos;block_closed&apos;);return false;" aria-expanded="true"><span class="block_ti "><span class="block_tiIn ">Indice</span></span></a><div class="block_co  collBlk_open" style=""><div class="blockTxt "><p class="txt_p ">Pour interroger les variables d'environnement côté serveur en PHP, le développeur dispose de l'ancienne instruction <strong class="txt_emphasis_is ">getenv(xxx)</strong> et du tableau <strong class="txt_emphasis_is "><em class="txt_special_ph ">superglobal</em></strong> prédéfini <strong class="txt_emphasis_is ">$_SERVER</strong>.</p></div><div class="blockTxt "><p class="txt_p "><span class="txt_url_ph "><a class="txt_url_ul" target="_blank" href="https://www.php.net/manual/fr/reserved.variables.server.php" rel="noopener" title="https://www.php.net/manual/fr/reserved.variables.server.php (nouvelle fenêtre)"><span>https://www.php.net/manual/fr/reserved.variables.server.php</span></a></span></p></div></div></div><div class="block hint"><a role="button" style="display:block;" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" class="block_open" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onclick="scDynUiMgr.collBlkToggle(this, scPaLib.findNode(&apos;par:/chl:div.block_co&apos;,this),&apos;block_open&apos;,&apos;block_closed&apos;);return false;" aria-expanded="true"><span class="block_ti "><span class="block_tiIn ">Indice</span></span></a><div class="block_co  collBlk_open" style=""><div class="blockTxt "><p class="txt_p ">La date du jour peut être récupérée par l'instruction PHP<strong class="txt_emphasis_is "> getdate()</strong>.</p></div><div class="blockTxt "><p class="txt_p ">La donnée reçue est vue comme un tableau de variables, un «tableau associatif» PHP dans lequel sont stockées les différentes parties de la date, jour, mois, année...</p></div></div></div><div class="block solution"><a role="button" style="display:block;" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" class="block_open" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onclick="scDynUiMgr.collBlkToggle(this, scPaLib.findNode(&apos;par:/chl:div.block_co&apos;,this),&apos;block_open&apos;,&apos;block_closed&apos;);return false;" aria-expanded="true"><span class="block_ti "><span class="block_tiIn ">Corrigé</span></span></a><div class="block_co  collBlk_open" style=""><div class="block information"><div class="block_co"><div class="blockTxt "><p class="txt_p ">Le début du script php pourrait donc ressembler à ceci:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/vueexo3c.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./vueexo3c_1.png" class="adapted " width="630" height="164" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Notez qu'il reste bien sûr possible de traduire en français le libellé du mois, soit par un algorithme de conversion en PHP, soit à l'aide d'instructions PHP spécifiques.</p></div><div class="blockTxt "><p class="txt_p ">Par ailleurs, on utilise dans ce script le «tableau associatif superglobal» prédéfini $_SERVER pour récupérer le nom du serveur Web.</p></div></div></div><div class="block example"><div class="block_ti"><span>UTILISATION DE L'INSTRUCTION GETENV()</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Cette instruction permet de récupérer un paramètre d'environnement quand on connaît son nom.</p></div><div class="blockTxt "><p class="txt_p ">Ici nous souhaitons afficher certains paramètres dans des lignes de tableau HTML, ce qui pourrait se réaliser en s'inspirant de cet extrait de script PHP.</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/vueexo3b.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./vueexo3b_1.png" class="adapted " width="630" height="463" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div></div></div><div class="block example"><div class="block_ti"><span>PARCOURS DU TABLEAU ASSOCIATIF $_SERVER</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Pour la dernière partie de cette page Web dynamique, on voudrait obtenir les mêmes informations en utilisant le tableau prédéfini <strong class="txt_emphasis_is ">$_SERVER</strong>.</p></div><div class="blockTxt "><p class="txt_p ">PHP offre souvent plusieurs manières d'aboutir au même résultat ce qui est assez perturbant pour le développeur débutant!</p></div><div class="blockTxt "><p class="txt_p ">On peut aisément effectuer une boucle de parcours automatique de l'ensemble de ce tableau associatif à l'aide d'une boucle PHP foreach(...) qui permet de récupérer à la fois le libellé du poste du tableau ainsi que sa valeur.</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/vueexo3.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./vueexo3_1.png" class="adapted " width="630" height="243" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">A partir des informations et extraits de code fournis, réalisez la page Web dynamique permettant d'afficher la date, le nom du serveur Web et des informations d'environnement récupérées des 2 manières citées. Testez sur différents navigateurs et relevez les variantes (certaines informations concernent le serveur Web, d'autres, le navigateur).</p></div></div></div></div></div></div></section><section class="section exercQuestion" data-sr-id="4" style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s, transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s;"><h2 class="section_ti"><span>Question 3</span></h2><div class="section_co "><div class="blockTxt "><p class="txt_p ">LES VARIABLES DE SESSION</p></div><div class="blockTxt "><p class="txt_p ">Le protocole <strong class="txt_emphasis_is ">HTTP</strong> est dit «sans connexion persistante», c'est-à-dire que le serveur Web «oublie» le navigateur dès qu'il lui a servi une page.</p></div><div class="blockTxt "><p class="txt_p ">Comment dans ces conditions alimenter un «caddie» de page en page sur un site marchand ou encore s'assurer qu'un visiteur s'est bien authentifié avant d'afficher des informations confidentielles?</p></div><div class="blockTxt "><p class="txt_p ">La solution communément utilisée repose sur l'usage des variables de session.</p></div><div class="blockTxt "><p class="txt_p ">Ce mécanisme est maintenant bien stabilisé et utilisable avec tout logiciel serveur Web et tout navigateur.</p></div><div class="blockTxt "><p class="txt_p ">N'oubliez pas comme toujours de vérifier le code HTML effectivement reçu par le navigateur.</p></div><div class="blockTxt "><p class="txt_p ">Un navigateur est capable de fournir au serveur Web un «identifiant de session» caractérisant une «instance» particulière de ce navigateur; si on ouvre simultanément ou successivement deux fenêtres d'Internet Explorer par exemple, chacune aura son identifiant de session unique.</p></div><div class="blockTxt "><p class="txt_p ">Cet identifiant de session est utilisé par le serveur Web pour allouer des ressources privées à chaque utilisateur du site, et ce, de manière transparente pour le développeur car il lui suffit de déclarer qu'il utilise le mécanisme des variables de niveau session.</p></div><div class="blockTxt "><p class="txt_p ">En PHP, ces variables de niveau session sont stockées dans le tableau associatif superglobal<strong class="txt_emphasis_is "> $_SESSION</strong>.</p></div><div class="blockTxt "><p class="txt_p ">Mais comme ce mécanisme est «coûteux» pour le serveur Web, il est nécessaire en PHP de préciser explicitement que l'on veut utiliser les variables de session grâce à l'instruction <strong class="txt_emphasis_is ">session_start()</strong></p></div><div class="blockTxt "><p class="txt_p ">Ne vous laissez pas abuser par le nom de cette instruction: elle permet d'utiliser le mécanisme des sessions et non de démarrer une session.</p></div><div class="blockTxt "><p class="txt_p ">On va ici mettre en œuvre ce mécanisme à travers le dialogue de pages Web suivant:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><img src="./vue4.png" class="adapted " width="630" height="371" alt="" style="max-width: 100%; height: auto;" /></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Dans ce form de login (login.htm), l'utilisateur saisit son nom (ici «Benoit») et son mot de passe qui ne sont pas contrôlés (ce n'est pas encore l'objet de notre étude); ce formulaire déclenchera un script PHP (loginctrl.php) qui va simplement mémoriser le nom saisi, dans une variable de niveau session, puis se dérouter vers le menu de l'application (script loginsuite.php):</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><img src="./vue4a.png" class="adapted " width="630" height="380" alt="" style="max-width: 100%; height: auto;" /></div></figure></div></div><div class="blockTxt "><p class="txt_p ">L'utilisateur peut maintenant mémoriser l'URL de cette page (copier/coller, favoris...) pour y retourner plus tard. Mais s'il s'agit d'une nouvelle session (autre instance du navigateur, autre navigateur), le menu refusera de s'afficher et renverra au formulaire de connexion:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><img src="./vue4b.png" class="adapted " width="630" height="382" alt="" style="max-width: 100%; height: auto;" /></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Notez bien que dans cet exemple, le même script PHP (loginsuite.php) fournira du code HTML différent affichant deux «pages Web» différentes selon les cas (ce qui est bien le but du PHP!), sous la même URL (adresse de page donc de script PHP)</p></div><div class="blockTxt "><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Le form de login reste une simple page HTML basée sur un formulaire en méthode POST contenant un input type <q class="txt_quote_ph "><span class="txt_quote_php ">« </span><strong class="txt_emphasis_is ">text</strong><span class="txt_quote_phs "> »</span></q>, un autre input type <q class="txt_quote_ph "><span class="txt_quote_php ">« </span><strong class="txt_emphasis_is ">password</strong><span class="txt_quote_phs "> »</span></q> et les deux boutons classiques <strong class="txt_emphasis_is "><q class="txt_quote_ph "><span class="txt_quote_php ">« </span>reset<span class="txt_quote_phs "> »</span></q></strong> et <strong class="txt_emphasis_is "><q class="txt_quote_ph "><span class="txt_quote_php ">« </span>submit<span class="txt_quote_phs "> »</span></q></strong>. L'action associée au form sera le script PHP <strong class="txt_emphasis_is "><em class="txt_special_ph ">loginctrl.php</em></strong>.</p></li></ul></div><div class="blockTxt "><p class="txt_p ">Prenez le temps de bien comprendre cet enchaînement de pages; l'animation jointe en annexe, PHP Exo3 peut vous aider à vous y retrouver.</p></div><div class="blockTxt "><p class="txt_p ">Bien compris? Alors, à vous de jouer!</p></div><div class="block hint"><a role="button" style="display:block;" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" class="block_open" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onclick="scDynUiMgr.collBlkToggle(this, scPaLib.findNode(&apos;par:/chl:div.block_co&apos;,this),&apos;block_open&apos;,&apos;block_closed&apos;);return false;" aria-expanded="true"><span class="block_ti "><span class="block_tiIn ">Indice</span></span></a><div class="block_co  collBlk_open" style=""><div class="blockTxt "><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Le script <strong class="txt_emphasis_is "><em class="txt_special_ph ">loginctrl.php</em></strong> doit récupérer le nom saisi dans le formulaire HTML posté, le mémoriser dans une variable de session à destination des pages futures, et renvoyer vers le script de menu <strong class="txt_emphasis_is "><em class="txt_special_ph ">loginsuite.php</em></strong>.</p></li><li class="txt_ili "><p class="txt_p ">PHP met à disposition les données saisies dans le formulaire précédent à travers les tableaux associatifs <strong class="txt_emphasis_is ">$_GET</strong> et <strong class="txt_emphasis_is ">$_POST</strong> selon la méthode d'envoi utilisée par le formulaire <strong class="txt_emphasis_is ">HTML</strong>, «get» ou «post».</p></li><li class="txt_ili "><p class="txt_p ">Une variable de session est créée au moment de sa première affectation.</p></li><li class="txt_ili "><p class="txt_p ">On redirige vers une autre page/script grâce à l'instruction <strong class="txt_emphasis_is "><em class="txt_special_ph ">header()</em></strong>-qui permet de modifier/paramétrer bien des choses dans l'entête de message <strong class="txt_emphasis_is ">HTTP</strong>...</p></li></ul></div></div></div><div class="block solution"><a role="button" style="display:block;" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" class="block_open" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onclick="scDynUiMgr.collBlkToggle(this, scPaLib.findNode(&apos;par:/chl:div.block_co&apos;,this),&apos;block_open&apos;,&apos;block_closed&apos;);return false;" aria-expanded="true"><span class="block_ti "><span class="block_tiIn ">Corrigé</span></span></a><div class="block_co  collBlk_open" style=""><div class="block information"><div class="block_ti"><span>Réalisation :</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Le script<strong class="txt_emphasis_is "><em class="txt_special_ph "> loginctrl.php</em></strong> pourrait donc être:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/loginctrl.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./loginctrl_1.png" class="adapted " width="630" height="146" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Il s'agit d'un script «aveugle», 100% PHP, qui assure des traitements sans rien retourner au navigateur.</p></div></div></div><div class="block basic"><div class="block_ti"><span>Essentiel à retenir</span></div><div class="block_co"><div class="blockTxt "><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Un client Web(navigateur) adresse en général au serveur Web une requête HTTP constituée d'une simple demande de page; l'URL correspondante est complétée par des informations de service (adresses IP de l'expéditeur et du destinataire...) et adressée sur le réseau sous la forme d'un entête de message HTTP;</p></li></ul><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Dans le cas des formulaires HTML, les données saisies par l'utilisateur sont transmises au serveur soit dans l'entête de message (méthode «get»), soit dans le corps du message (méthode «post»); cette méthode «post» permet de véhiculer d'importants volumes de données mais elle est plus gourmande en ressources réseau;</p></li></ul><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Les balises HTML &lt;meta http-equiv="..." /&gt; permettent de modifier certaines informations de service contenues dans l'entête de message HTTP (mise en cache, indexation par moteurs de recherche...);</p></li></ul><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Un serveur Web retourne la réponse sous forme d'un entête de message HTTP(informations de service) suivi du contenu HTML/JavaScript/CSS dans le corps du message HTTP;</p></li></ul><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">L'instruction PHP header() permet de modifier certaines informations de service contenues dans l'entête du message HTTP retourné au client Web (date d'expiration de la page, mise en cache, redirection vers une autre URL...);</p></li></ul><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">En cas de redirection de la réponse HTTP -instruction PHP header(‘location:...')-, le développeur doit s'assurer que le script ne génère aucun contenu HTML/JavaScript/CSS à retourner au client (même pas un saut de ligne!) car il s'agit de se dérouter vers un autre script PHP;</p></li></ul><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Le code HTML/JavaScript/CSS résultant d'un script PHP sera effectivement envoyé au client Web dès la fin de l'évaluation du script ou lorsque l'interpréteur PHP rencontre l'instruction exit();</p></li></ul></div></div></div><div class="block information"><div class="block_co"><div class="blockTxt "><p class="txt_p ">Dans notre cas, l'instruction header(‘location:...') est la dernière instruction rencontrée et la redirection vers le script suivant est donc immédiate mise en œuvre.</p></div><div class="blockTxt "><p class="txt_p ">C'est une bonne pratique de faire suivre header(‘location:...') par exit().</p></div><div class="blockTxt "><p class="txt_p ">L'affichage de la réponse sera assuré par le script loginsuite.php.</p></div><div class="blockTxt "><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Le script loginsuite.php, comme toute page à accès contrôlé du site, vérifie l'existence de la variable de session(instruction PHP isset()); si le test échoue, ce script affiche le message d'erreur sous forme d'une page HTML complète (qui peut encore se rediriger automatiquement vers le formulaire de login au bout de 3 secondes); si le test réussit, ce script affiche normalement le menu.</p></li></ul><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Ce script commence par utiliser le mécanisme des variables de session:</p></li></ul></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/debut4.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./debut4_1.png" class="adapted " width="630" height="136" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Le début de page HTML est variable au niveau du contenu de la balise HTML &lt;title&gt;:</p></li></ul></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/corps.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./corps_1.png" class="adapted " width="630" height="284" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Le corps de la page est bien entendu variable lui-aussi:</p></div><div class="blockTxt "><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">en cas d'échec:</p></li></ul></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><img src="./echec4.png" class="adapted " width="630" height="219" alt="" style="max-width: 100%; height: auto;" /></div></figure></div></div><div class="blockTxt "><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">et en cas de succès:</p></li></ul></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/success4.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./success4_1.png" class="adapted " width="630" height="320" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Reproduisez ce script et testez en mémorisant le menu dans vos favoris pour y revenir avec la même instance du navigateur, quelques minutes plus tard, quelques heures plus tard, avec une autre instance de navigateur, avec un autre navigateur... Vous devez vérifier que votre session est bien associée à une instance d'un navigateur et que la session se détruit automatiquement après un temps d'inactivité (déterminé par le serveur Web).</p></div><div class="blockTxt "><p class="txt_p ">NB: Variante de programmation du contrôle d'accès:</p></div><div class="blockTxt "><p class="txt_p ">Avec cette construction, chaque page du site nécessitant un accès contrôlé a un contenu variable dans ses différentes parties de code HTML (&lt;head&gt;, &lt;title&gt;, &lt;body&gt;), ce qui rend le code assez confus et difficile à maintenir. On peut imaginer une autre construction où le script teste tout d'abord l'existence des variables de session pour rediriger immédiatement vers la page de login en cas d'erreur:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/fin4.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./fin4_1.png" class="adapted " width="630" height="207" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Cependant, avec cette construction, l'affichage d'un message d'erreur devient plus compliqué; on y reviendra...</p></div></div></div></div></div></div></section><section class="section exercQuestion" data-sr-id="5" style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s, transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s;"><h2 class="section_ti"><span>Question 4</span></h2><div class="section_co "><div class="blockTxt "><p class="txt_p "><strong class="txt_emphasis_is "><em class="txt_special_ph ">EXPLOITATION DES FORMULAIRES HTML</em></strong></p></div><div class="blockTxt "><p class="txt_p ">Dans cet exercice, il s'agit de se préparer à exploiter, côté serveur Web, en <strong class="txt_emphasis_is ">PHP</strong>, les données saisies dans un formulaire <strong class="txt_emphasis_is ">HTML</strong>.</p></div><div class="blockTxt "><p class="txt_p ">Si la transmission et la récupération des informations restent simples car il suffit de lire le contenu des tableaux associatifs <strong class="txt_emphasis_is ">superglobaux</strong> <strong class="txt_emphasis_is ">$_GET et $_POST</strong>, le traitement de ces données devient délicat dès lors qu'il s'agit de les lier à une base de données; la difficulté réside dans la préparation du libellé de la requête <strong class="txt_emphasis_is ">SQL</strong> à envoyer au serveur de bases de données.</p></div><div class="blockTxt "><p class="txt_p ">Le but de cet exercice est donc de récupérer les informations saisies en formulaire HTML et de préparer une requête <strong class="txt_emphasis_is ">SQL</strong>, sans aller jusqu'à l'exécuter dans <strong class="txt_emphasis_is "><em class="txt_special_ph ">MySQL</em></strong>; à l'issue de l'exercice, on prendra toute la mesure de l'aide apportée par un <strong class="txt_emphasis_is "><em class="txt_special_ph ">framework</em></strong> comme <strong class="txt_emphasis_is ">PDO</strong> pour accéder à une base de données...</p></div><div class="blockTxt "><p class="txt_p "><strong class="txt_emphasis_is "><em class="txt_special_ph ">FORMULAIRE HTML DE SAISIE</em></strong></p></div><div class="blockTxt "><p class="txt_p ">Écrivez un code HTML simple permettant d'obtenir un formulaire ressemblant à ceci:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/form.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./form_1.png" class="adapted " width="630" height="438" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Le form est bien entendu associé à un script PHP (par exemple formul.php) et il expédie ses données en méthode GET(uniquement à des fins de contrôle et de compréhension des échanges HTTP client/serveur).</p></div><div class="blockTxt "><p class="txt_p ">Nommer tous les contrôles graphiques porteurs de données (par exemple <strong class="txt_emphasis_is "><em class="txt_special_ph ">nom</em></strong> et <strong class="txt_emphasis_is "><em class="txt_special_ph ">age</em></strong> pour les boites de texte, <strong class="txt_emphasis_is "><em class="txt_special_ph ">marit</em></strong> pour les boutons radio et internet, micro, jeux pour les cases à cocher);</p></div><div class="blockTxt "><p class="txt_p ">Les boutons de commande, non porteurs d'information n'ont pas besoin d'êtres nommés en HTML (car tous les contrôles graphiques nommés en HTML sont envoyés au serveur Web).</p></div><div class="blockTxt "><p class="txt_p "><strong class="txt_emphasis_is "><em class="txt_special_ph ">PAGE DE RÉPONSE</em></strong></p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><img src="./reppage.png" class="adapted " width="630" height="367" alt="" style="max-width: 100%; height: auto;" /></div></figure></div></div><div class="block solution"><a role="button" style="display:block;" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" class="block_open" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onclick="scDynUiMgr.collBlkToggle(this, scPaLib.findNode(&apos;par:/chl:div.block_co&apos;,this),&apos;block_open&apos;,&apos;block_closed&apos;);return false;" aria-expanded="true"><span class="block_ti "><span class="block_tiIn ">Corrigé</span></span></a><div class="block_co  collBlk_open" style=""><div class="block information"><div class="block_co"><div class="blockTxt "><p class="txt_p ">SCRIPT FORMUL.PHP:</p></div><div class="blockTxt "><ul class="txt_il "><li class="txt_ili "><p class="txt_p ">Préparer des variables avant tout affichage;</p></li><li class="txt_ili "><p class="txt_p ">Le nom est récupéré grâce à $_GET["nom"];</p></li><li class="txt_ili "><p class="txt_p ">L'age est récupéré grâce à $_GET["age"];</p></li><li class="txt_ili "><p class="txt_p ">La situation maritale est reçue dans $_GET["marit"]comme une seule donnée dont la valeur correspond au value HTML du bouton sélectionné par l'utilisateur (vérifiez en observant la barre d'adresse quand vous soumettez le formulaire);</p></li></ul></div><div class="blockTxt "><p class="txt_p ">Voici donc le début du code du script nécessaire pour afficher la page de résultat:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/codedu4.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./codedu4_1.png" class="adapted " width="630" height="198" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">NB: il s'agit bien de constituer le libellé d'une requête SQL insert où les valeurs sont séparées par des virgules et les chaînes de caractères entourées d'apostrophes.</p></div><div class="blockTxt "><p class="txt_p ">NB: ici, on a utilisé la syntaxe PHP à base de concaténations explicites(opérateur PHP ‘.'). Mais souvenez-vous qu'au premier exercice vous avez vu des variantes de syntaxe pour effectuer des concaténations implicites en PHP. Et il existe aussi un opérateur PHP d'auto-concaténation ‘.='.</p></div><div class="blockTxt "><p class="txt_p ">On pourrait donc aussi bien écrire, pour concaténer le libellé de la requête:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/imgfin4.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./imgfin4_1.png" class="adapted " width="630" height="143" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Utilisez une syntaxe au l'autre selon ce qui vous semble le plus ‘naturel' (ou logique) mais il est important de comprendre ces variantes de syntaxe pour pouvoir exploiter la prose disponible sur le PHP.</p></div><div class="blockTxt "><p class="txt_p ">Et n'oubliez pas qu'une chaîne de caractères exprimée entre guillemets est plus coûteuse à traiter par l'interpréteur PHP car elle est évaluée caractère par caractère alors que la même chaîne exprimée entre apostrophes sera plus rapidement traitée; réservez les guillemets aux chaînes contenant des caractères spéciaux et aux concaténations implicites.</p></div><div class="blockTxt "><p class="txt_p ">Pour les cases à cocher cela se complique car seules les cases cochées par l'utilisateur seront envoyées au serveur Web(vérifiez en observant la barre d'adresse quand vous soumettez le formulaire);</p></div><div class="blockTxt "><p class="txt_p ">le développeur ne peut donc pas savoir a priori s'il les recevra dans le tableau $_GET!</p></div><div class="blockTxt "><p class="txt_p ">Il faut tester l'existence de la variable dans le tableau <strong class="txt_emphasis_is ">$_GET</strong> et, en cas de succès, récupérer sa valeur pour l'affichage;</p></div><div class="blockTxt "><p class="txt_p ">il faudra aussi en déduire si on doit envoyer le chiffre 1ou le chiffre 0à la base de données. Cela peut s'écrire, pour les 2 premières cases:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/vuefin4b.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./vuefin4b_1.png" class="adapted " width="630" height="455" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Concernant l'affichage du résultat, tout est donc préparé par les traitements précédents; il ne reste que la génération du code HTML :</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/vuefin4d.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./vuefin4d_1.png" class="adapted " width="630" height="279" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Reproduisez le code ci-dessus. Testez différentes valeurs dans le formulaire et observez bien les résultats obtenus ainsi que la barre d'adresse du navigateur.</p></div><div class="blockTxt "><p class="txt_p ">Il doit au moins rester à traiter le cas où l'utilisateur ne s'intéresse à rien...</p></div></div></div><div class="block remark"><div class="block_ti"><span>VARIANTE POUR GÉRER LES CASES A COCHER:</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Il est souvent utile de recevoir les cases cochées dans un tableau de variables PHP car on peut aisément parcourir un tableau grâce à l'instruction PHP foreach(...). Pour arriver à cela, il est utile de nommer en HTML les cases comme un tableau PHP, comme ci-dessous:</p></div><div class="blockTxt "><p class="txt_p "><strong class="txt_emphasis_is ">&lt;input type="checkbox" name = "interet[]"value="internet" checked&gt;Internet&amp;nbsp;</strong></p><p class="txt_p "><strong class="txt_emphasis_is ">&lt;input type="checkbox" name = "interet[]"value="micro"&gt;Micro-informatique&amp;nbsp;</strong></p><p class="txt_p "><strong class="txt_emphasis_is ">&lt;input type="checkbox" name = "interet[]"value="jeux"&gt;Jeux Vidéo&amp;nbsp;</strong></p></div><div class="blockTxt "><p class="txt_p ">Cet artifice n'a pas de sens particulier en HTML mais il force la récupération dans un tableau de variables PHP, des différentes cases cochées en formulaire. Dans le script PHP, il faut donc tester qu'au moins une case a été cochée puis parcourir tous les postes du tableau comme dans l'extrait de code suivant:</p></div><div class="blockTxt "><div class="txt_img_ex "><figure role="group" class="image"><div><a href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/res/vunfin4c.png" class="adaptedlnk zoom" target="_blank" onclick="scImageMgr.loading(); return false;" title="Cliquez pour agrandir (nouvelle fenêtre)" role="button"><img src="./vunfin4c_1.png" class="adapted " width="630" height="410" alt="" style="max-width: 100%; height: auto;" /></a></div></figure></div></div><div class="blockTxt "><p class="txt_p ">Il reste à traiter correctement la concaténation du libellé de la requête SQL, à déterminer s'il faut écrire des 1 ou des 0 dans la base de données... Il existe plusieurs logiques de solutions, vous en trouverez certainement une!</p></div></div></div></div></div></div></section><section class="section " data-sr-id="6" style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s, transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0.2s;"><h2 class="section_ti"><span>Conclusion</span></h2><div class="section_co "><div class="block information"><div class="block_ti"><span>BILAN DES EXERCICES</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">BILAN DES EXERCICES</p></div></div></div><div class="block basic"><div class="block_ti"><span>FONDAMENTAUX</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Un script <strong class="txt_emphasis_is ">PHP</strong> a pour vocation de générer/personnaliser du code <strong class="txt_emphasis_is "><em class="txt_special_ph ">HTML / JavaScript / CSS</em></strong> à retourner au navigateur de l'utilisateur.</p></div><div class="blockTxt "><p class="txt_p ">On ne pourra donc jamais rien faire de mieux ou de plus avec PHP que ce que l'on saurait écrire en HTML / CSS / JavaScript.</p></div><div class="blockTxt "><p class="txt_p ">Tout le code <strong class="txt_emphasis_is "><em class="txt_special_ph ">HTML / CSS / JavaScript</em></strong> constant peut s'écrire «naturellement», en dehors des balises <strong class="txt_emphasis_is ">&lt;?php ...?&gt;</strong>, au sein du script PHP.</p></div><div class="blockTxt "><p class="txt_p ">Dès que du code <strong class="txt_emphasis_is "><em class="txt_special_ph ">HTML / CSS / JavaScript</em></strong> est variable, qu'il doit être adapté/généré côté serveur, il est nécessaire de programmer la logique du traitement correspondant en langage <strong class="txt_emphasis_is ">PHP</strong> dans une balise spécifique <strong class="txt_emphasis_is ">&lt;?php ...?&gt;</strong>.</p></div></div></div><div class="block basic"><div class="block_ti"><span>SYNTAXE PHP</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Terminer chaque instruction par un signe point-virgule.</p></div><div class="blockTxt "><p class="txt_p ">Les variables ne sont pas déclarées et leur type s'adapte au contenu courant (ce qui n'est pas une raison pour programmer n'importe comment...).</p></div><div class="blockTxt "><p class="txt_p ">Les tableaux de variables <strong class="txt_emphasis_is ">PHP</strong> peuvent être manipulés classiquement par indices numériques mais <strong class="txt_emphasis_is ">PHP</strong> propose aussi des tableaux associatifs dans lesquels les indices sont avantageusement remplacés par des libellés bien plus clairs.</p></div><div class="blockTxt "><p class="txt_p ">PHP met à disposition du développeur des tableaux associatifs prédéfinis («<strong class="txt_emphasis_is "><em class="txt_special_ph ">superglobaux</em></strong>») comme <strong class="txt_emphasis_is ">$_SERVER, $_GET, $_POST, $_SESSION</strong>.</p></div></div></div><div class="block basic"><div class="block_ti"><span>VARIABLES DE SESSION</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Un serveur Web «<strong class="txt_emphasis_is "><em class="txt_special_ph ">oublie</em></strong>» un client Web dès qu'il lui a servi la page demandée; pour garder la trace des différentes navigations d'un utilisateur (sur un même site), il est possible d'utiliser des variables de session qui persistent au-delà de la durée de vie du script <strong class="txt_emphasis_is ">PHP</strong> sur le serveur.</p></div><div class="blockTxt "><p class="txt_p ">Une session correspond à une instance d'un navigateur et a une durée de vie limitée.</p></div></div></div><div class="block basic"><div class="block_ti"><span>EXPLOITATION DES FORMULAIRES COTE SERVEUR</span></div><div class="block_co"><div class="blockTxt "><p class="txt_p ">Tous les champs de saisie nommés d'un formulaire <strong class="txt_emphasis_is "><em class="txt_special_ph ">HTML</em></strong> sont adressés au serveur Web par le navigateur Web lors de la soumission du formulaire (clic sur bouton <strong class="txt_emphasis_is ">submit</strong> ou encore méthode <strong class="txt_emphasis_is ">.submit()</strong> du formulaire invoquée par <strong class="txt_emphasis_is "><em class="txt_special_ph ">JavaScript</em></strong>).</p></div><div class="blockTxt "><p class="txt_p ">Dans un même groupe de boutons radio, celui qui est coché donne sa valeur à la variable reçue en <strong class="txt_emphasis_is ">PHP</strong>.</p></div><div class="blockTxt "><p class="txt_p ">Pour les cases à cocher, seules les cases cochées par l'utilisateur seront transmises au serveur; le script <strong class="txt_emphasis_is ">PHP</strong> devra donc tester leur existence avant de pouvoir les exploiter.</p></div></div></div></div></section></div><div class="navLinks"><a class="backToTop " href="javascript:window.scrollTo(0,0);" title="Retourner en haut de la page"><span><span>Top</span></span></a></div></main><footer id="footer"><a role="button" target="_blank" href="https://afpa-ress.scenari.eu/RessourcesResw/MTcwNDM0MA==_1617106253721/co/exercise.xhtml#" onclick="scDynUiMgr.displaySubWindow(this,&quot;exercise_1.xhtml&quot;,&quot;extra&quot;);return false;" onkeyup="scDynUiMgr.handleBtnKeyUp(event);" onkeydown="scDynUiMgr.handleBtnKeyDwn(event);" title="Crédits"><span>Crédits</span></a></footer></div>
		<script type="text/JavaScript" src="./skin(1).js.téléchargement" />
		<script type="text/javascript"><![CDATA[tplMgr.init();keyMap.init();scImageMgr.init();scCodeMgr.init();mapMgr.init();]]></script></body></html>